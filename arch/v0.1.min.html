<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>パズルゲーム</title><style> .p{position:absolute;background:aqua;width:30px;height:30px;text-align: center;cursor:default;}.field{position: absolute;background-color:bisque;left:0px;top:0px;width:145px;height:145px;}.text{position: absolute;left:150px;top:0px;line-height: 2px;}</style><script>let pieces,field,air;class piece{constructor(e){if(this.x=0,this.y=0,this.num=e,!e)return;let t=document.createElement("div");t.setAttribute("class","p");let c="b"+e;t.setAttribute("id",c),t.innerText=e,this.touchair=!1,field.appendChild(t),this.e=document.getElementById(c),this.e.onclick=()=>{if(detecttouch(),this.touchair){let e=this.x,t=this.y;this.setpos(air.x,air.y),air.setpos(e,t)}}}setpos(e,t){this.x=e,this.y=t,this.e&&(this.e.style.left=5+35*e+"px",this.e.style.top=5+35*t+"px")}}function detecttouch(){let e=[45,45,45,45],t=air.x,c=air.y;for(let i=0;i<15;i++){pieces[i].touchair=!1;let s=pieces[i].x,o=pieces[i].y;t+1!=s&&t-1!=s||c==o&&(pieces[i].touchair=!0,t+1==s&&(e[3]=i),t-1==s&&(e[1]=i)),c+1!=o&&c-1!=o||t==s&&(pieces[i].touchair=!0,c+1==o&&(e[2]=i),c-1==o&&(e[0]=i))}return e}function downkey(e){switch(e.key){case"w":case"ArrowUp":45!=detecttouch()[0]&&pieces[detecttouch()[0]].e.click();break;case"a":case"ArrowLeft":45!=detecttouch()[1]&&pieces[detecttouch()[1]].e.click();break;case"s":case"ArrowDown":45!=detecttouch()[2]&&pieces[detecttouch()[2]].e.click();break;case"d":case"ArrowRight":45!=detecttouch()[3]&&pieces[detecttouch()[3]].e.click()}}function load(){document.onselectstart=()=>!1,field=document.querySelector(".field"),pieces=Array(15),air=new piece(0),air.setpos(3,3);for(let e=0;e<15;++e)pieces[e]=new piece(e+1);let e=0;for(let t=0;t<4;++t)for(let c=0;c<4&&!(e>=15);++c)pieces[e].setpos(c,t),e++;document.addEventListener("keydown",downkey)}function scramble(){let e=["w","a","s","d"];for(let t=0;t<1e3;++t){downkey({key:e[Math.floor(1e3*Math.random())%4]})}}function solve(){document.querySelectorAll(".p").forEach((e=>{e.remove()})),pieces=Array(15),air=new piece(0),air.setpos(3,3);for(let e=0;e<15;++e)pieces[e]=new piece(e+1);let e=0;for(let t=0;t<4;++t)for(let c=0;c<4&&!(e>=15);++c)pieces[e].setpos(c,t),e++}</script></head><body onload="load()"><div class="field"></div><div class="text"><p>パズルゲーム!</p><br><p>操作：矢印キーとWASDキーか</p><p>動かせるパズルをタッチ</p><br><br><button onclick="scramble()">パズルを混ぜる</button><br><button onclick="solve()">パズルを揃える</button></div></body></html>